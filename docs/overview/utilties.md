---
id: api
title: API overview
---

<div id="codefund"></div>

# Api overview

See the [full API docs](docs/API/README.md) for more details.

| signature                                                                                                             |                                                                                                                                                                                                                                                       |
| --------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [`addDisposer(node, () => void)`](docs/API/README.md#adddisposer)                                                     | Add a function to be invoked whenever the target node is about to be destroyed                                                                                                                                                                        |
| [`addMiddleware(node, middleware: (actionDescription, next) => any, includeHooks)`](docs/API/README.md#addmiddleware) | Attaches middleware to a node. See [middleware](docs/middleware.md). Returns disposer.                                                                                                                                                                |
| [`applyAction(node, actionDescription)`](docs/API/README.md#applyaction)                                              | Replays an action on the targeted node                                                                                                                                                                                                                |
| [`applyPatch(node, jsonPatch)`](docs/API/README.md#applypatch)                                                        | Applies a JSON patch, or array of patches, to a node in the tree                                                                                                                                                                                      |
| [`applySnapshot(node, snapshot)`](docs/API/README.md#applysnapshot)                                                   | Updates a node with the given snapshot                                                                                                                                                                                                                |
| [`cast(nodeOrSnapshot)`](docs/API/README.md#cast)                                                                     | Cast a node instance or snapshot to a node instance so it can be used in assignment operations                                                                                                                                                        |
| [`castToSnapshot(nodeOrSnapshot)`](docs/API/README.md#casttosnapshot)                                                 | Cast a node instance to a snapshot so it can be used inside create operations                                                                                                                                                                         |
| [`castToReferenceSnapshot(node)`](docs/API/README.md#casttoreferencesnapshot)                                         | Cast a node instance to a reference snapshot so it can be used inside create operations                                                                                                                                                               |
| [`createActionTrackingMiddleware`](docs/API/README.md#createactiontrackingmiddleware)                                 | Utility to make writing middleware that tracks async actions less cumbersome. Consider migrating to `createActionTrackingMiddleware2`                                                                                                                 |
| [`createActionTrackingMiddleware2`](docs/API/README.md#createactiontrackingmiddleware)                                | Utility to make writing middleware that tracks async actions less cumbersome                                                                                                                                                                          |
| [`clone(node, keepEnvironment?: true \| false \| newEnvironment)`](docs/API/README.md#clone)                          | Creates a full clone of the given node. By default preserves the same environment                                                                                                                                                                     |
| [`decorate(handler, function)`](docs/API/README.md#decorate)                                                          | Attaches middleware to a specific action (or flow)                                                                                                                                                                                                    |
| [`destroy(node)`](docs/API/README.md#destroy)                                                                         | Kills `node`, making it unusable. Removes it from any parent in the process                                                                                                                                                                           |
| [`detach(node)`](docs/API/README.md#detach)                                                                           | Removes `node` from its current parent, and lets it live on as standalone tree                                                                                                                                                                        |
| [`flow(generator)`](docs/API/README.md#flow)                                                                          | Creates an asynchronous flow based on a generator function                                                                                                                                                                                            |
| [`castFlowReturn(value)`](docs/API/README.md#castflowreturn)                                                          | Casts a flow return value so it can be correctly inferred as return type. Only needed when using TypeScript and when returning a Promise.                                                                                                             |
| [`getChildType(node, property?)`](docs/API/README.md#getchildtype)                                                    | Returns the declared type of the given `property` of `node`. For arrays and maps `property` can be omitted as they all have the same type                                                                                                             |
| [`getEnv(node)`](docs/API/README.md#getenv)                                                                           | Returns the environment of `node`, see [environments](#environments)                                                                                                                                                                                  |
| [`getParent(node, depth=1)`](docs/API/README.md#getparent)                                                            | Returns the intermediate parent of the `node`, or a higher one if `depth > 1`                                                                                                                                                                         |
| [`getParentOfType(node, type)`](docs/API/README.md#getparentoftype)                                                   | Return the first parent that satisfies the provided type                                                                                                                                                                                              |
| [`getPath(node)`](docs/API/README.md#getpath)                                                                         | Returns the path of `node` in the tree                                                                                                                                                                                                                |
| [`getPathParts(node)`](docs/API/README.md#getpathparts)                                                               | Returns the path of `node` in the tree, unescaped as separate parts                                                                                                                                                                                   |
| [`getRelativePath(base, target)`](docs/API/README.md#getrelativepath)                                                 | Returns the short path, which one could use to walk from node `base` to node `target`, assuming they are in the same tree. Up is represented as `../`                                                                                                 |
| [`getRoot(node)`](docs/API/README.md#getroot)                                                                         | Returns the root element of the tree containing `node`                                                                                                                                                                                                |
| [`getIdentifier(node)`](docs/API/README.md#getidentifier)                                                             | Returns the identifier of the given element                                                                                                                                                                                                           |
| [`getNodeId(node)`](docs/API/README.md#getnodeid)                                                                     | Returns the unique node id (not to be confused with the instance identifier) for a given instance                                                                                                                                                     |
| [`getSnapshot(node, applyPostProcess)`](docs/API/README.md#getsnapshot)                                               | Returns the snapshot of the `node`. See [snapshots](#snapshots)                                                                                                                                                                                       |
| [`getType(node)`](docs/API/README.md#gettype)                                                                         | Returns the type of `node`                                                                                                                                                                                                                            |
| [`hasParent(node, depth=1)`](docs/API/README.md#hasparent)                                                            | Returns `true` if `node` has a parent at `depth`                                                                                                                                                                                                      |
| [`hasParentOfType(node, type)`](docs/API/README.md#hasparentoftype)                                                   | Returns `true` if the `node` has a parent that satisfies the provided type                                                                                                                                                                            |
| [`isAlive(node)`](docs/API/README.md#isalive)                                                                         | Returns `true` if `node` is alive                                                                                                                                                                                                                     |
| [`isStateTreeNode(value)`](docs/API/README.md#isstatetreenode)                                                        | Returns `true` if `value` is a node of a mobx-state-tree                                                                                                                                                                                              |
| [`isProtected(value)`](docs/API/README.md#isprotected)                                                                | Returns `true` if the given node is protected, see [actions](#actions)                                                                                                                                                                                |
| [`isValidReference(() => node \| null \| undefined, checkIfAlive = true)`](docs/API/README.md#isvalidreference)       | Tests if a reference is valid (pointing to an existing node and optionally if alive) and returns if the check passes or not.                                                                                                                          |
| [`isRoot(node)`](docs/API/README.md#isroot)                                                                           | Returns true if `node` has no parents                                                                                                                                                                                                                 |
| [`joinJsonPath(parts)`](docs/API/README.md#joinjsonpath)                                                              | Joins and escapes the given path `parts` into a JSON path                                                                                                                                                                                             |
| [`onAction(node, (actionDescription) => void)`](docs/API/README.md#onaction)                                          | A built-in middleware that calls the provided callback with an action description upon each invocation. Returns disposer                                                                                                                              |
| [`onPatch(node, (patch) => void)`](docs/API/README.md#onpatch)                                                        | Attach a JSONPatch listener, that is invoked for each change in the tree. Returns disposer                                                                                                                                                            |
| [`onSnapshot(node, (snapshot) => void)`](docs/API/README.md#onsnapshot)                                               | Attach a snapshot listener, that is invoked for each change in the tree. Returns disposer                                                                                                                                                             |
| [`process(generator)`](docs/API/README.md#process)                                                                    | `DEPRECATED` – replaced with [flow](docs/API/README.md#flow)                                                                                                                                                                                          |
| [`protect(node)`](docs/API/README.md#protect)                                                                         | Protects an unprotected tree against modifications from outside actions                                                                                                                                                                               |
| [`recordActions(node)`](docs/API/README.md#recordactions)                                                             | Creates a recorder that listens to all actions in `node`. Call `.stop()` on the recorder to stop this, and `.replay(target)` to replay the recorded actions on another tree                                                                           |
| [`recordPatches(node)`](docs/API/README.md#recordpatches)                                                             | Creates a recorder that listens to all patches emitted by the node. Call `.stop()` on the recorder to stop this, and `.replay(target)` to replay the recorded patches on another tree                                                                 |
| [`getMembers(node)`](docs/API/README.md#getMembers)                                                                   | Returns the model name, properties, actions, views, volatiles of a model node instance                                                                                                                                                                |
| [`getPropertyMembers(typeOrNode)`](docs/API/README.md#getPropertyMembers)                                             | Returns the model name and properties of a model type for either a model type or a model node                                                                                                                                                         |
| [`resolve(node, path)`](docs/API/README.md#resolve)                                                                   | Resolves a `path` (json path) relatively to the given `node`                                                                                                                                                                                          |
| [`resolveIdentifier(type, target, identifier)`](docs/API/README.md#resolveidentifier)                                 | resolves an identifier of a given type in a model tree                                                                                                                                                                                                |
| [`resolvePath(target, path)`](docs/API/README.md#resolvepath)                                                         | resolves a JSON path, starting at the specified target                                                                                                                                                                                                |
| [`setLivelinessChecking("warn" \| "ignore" \| "error")`](docs/API/README.md#setlivelinesschecking)                    | Defines what MST should do when running into reads / writes to objects that have died. By default it will print a warning. Use te `"error"` option to easy debugging to see where the error was thrown and when the offending read / write took place |
| [`getLivelinessChecking()`](docs/API/README.md#getlivelinesschecking)                                                 | Returns the current liveliness checking mode.                                                                                                                                                                                                         |
| [`splitJsonPath(path)`](docs/API/README.md#splitjsonpath)                                                             | Splits and unescapes the given JSON `path` into path parts                                                                                                                                                                                            |
| [`typecheck(type, value)`](docs/API/README.md#typecheck)                                                              | Typechecks a value against a type. Throws on errors. Use this if you need typechecks even in a production build. NOTE: set process.env.ENABLE_TYPE_CHECK = "true" if you want to enable type checking in any environment                                                                                                                                      |
| [`tryResolve(node, path)`](docs/API/README.md#tryresolve)                                                             | Like `resolve`, but just returns `null` if resolving fails at any point in the path                                                                                                                                                                   |
| [`tryReference(() => node \| null \| undefined, checkIfAlive = true)`](docs/API/README.md#tryreference)                 | Tests if a reference is valid (pointing to an existing node and optionally if alive) and returns such reference if it the check passes, else it returns undefined.                                                                                    |
| [`unprotect(node)`](docs/API/README.md#unprotect)                                                                     | Unprotects `node`, making it possible to directly modify any value in the subtree, without actions                                                                                                                                                    |
| [`walk(startNode, (node) => void)`](docs/API/README.md#walk)                                                          | Performs a depth-first walk through a tree                                                                                                                                                                                                            |
| [`escapeJsonPath(path)`](docs/API/README.md#escapejsonpath)                                                           | escape special characters in an identifier, according to http://tools.ietf.org/html/rfc6901                                                                                                                                                           |
| [`unescapeJsonPath(path)`](docs/API/README.md#unescapejsonpath)                                                       | escape special characters in an identifier, according to http://tools.ietf.org/html/rfc6901                                                                                                                                                           |
| [`isType(value)`](docs/API/README.md#isType)                                                                          | Returns if a given value represents a type.                                                                                                                                                                                                           |
| [`isArrayType(value)`](docs/API/README.md#isArrayType)                                                                | Returns if a given value represents an array type.                                                                                                                                                                                                    |
| [`isFrozenType(value)`](docs/API/README.md#isFrozenType)                                                              | Returns if a given value represents a frozen type.                                                                                                                                                                                                    |
| [`isIdentifierType(value)`](docs/API/README.md#isIdentifierType)                                                      | Returns if a given value represents an identifier type.                                                                                                                                                                                               |
| [`isLateType(value)`](docs/API/README.md#isLateType)                                                                  | Returns if a given value represents a late type.                                                                                                                                                                                                      |
| [`isLiteralType(value)`](docs/API/README.md#isLiteralType)                                                            | Returns if a given value represents a literal type.                                                                                                                                                                                                   |
| [`isMapType(value)`](docs/API/README.md#isMapType)                                                                    | Returns if a given value represents a map type.                                                                                                                                                                                                       |
| [`isModelType(value)`](docs/API/README.md#isModelType)                                                                | Returns if a given value represents a model type.                                                                                                                                                                                                     |
| [`isOptionalType(value)`](docs/API/README.md#isOptionalType)                                                          | Returns if a given value represents an optional type.                                                                                                                                                                                                 |
| [`isPrimitiveType(value)`](docs/API/README.md#isPrimitiveType)                                                        | Returns if a given value represents a primitive type.                                                                                                                                                                                                 |
| [`isReferenceType(value)`](docs/API/README.md#isReferenceType)                                                        | Returns if a given value represents a reference type.                                                                                                                                                                                                 |
| [`isRefinementType(value)`](docs/API/README.md#isRefinementType)                                                      | Returns if a given value represents a refinement type.                                                                                                                                                                                                |
| [`isUnionType(value)`](docs/API/README.md#isUnionType)                                                                | Returns if a given value represents a union type.                                                                                                                                                                                                     |
| [`getRunningActionContext()`](docs/API/README.md#getrunningactioncontext)                                             | Returns the currently executing MST action context, or undefined if none.                                                                                                                                                                             |
| [`isActionContextChildOf(actionContext, parent)`](docs/API/README.md#isActionContextChildOf)                          | Returns if the given action context is a parent of this action context.                                                                                                                                                                               |
| [`isActionContextThisOrChildOf(actionContext, parentOrSame)`](docs/API/README.md#isActionContextThisOrChildOf)        | Returns if the given action context is this or a parent of this action context.                                                                                                                                                                       |

A _disposer_ is a function that cancels the effect for which it was created.

